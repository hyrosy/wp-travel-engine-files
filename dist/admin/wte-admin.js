(()=>{function e(){if(0!=arguments.length){var e,t,a,n=Array.prototype.slice.call(arguments),i=n.shift();if("undefined"==typeof actions&&(actions={}),void 0!==actions[i])for(e=0;e<=100;e++)if(actions[i][e])for(t=0,a=actions[i][e].length;t<a;t++){var o=actions[i][e][t];window[o](n)}}}function t(e){(e=jQuery)(".wpte-toggle-item:not(.active) .wpte-toggle-content").hide(),e(document).on("click",".wpte-toggle-title a",(function(){e(this).parents(".wpte-toggle-item").toggleClass("active"),e(this).parents(".wpte-toggle-title").siblings(".wpte-toggle-content").stop(!0,!1,!0).slideToggle()})),e(document).on("click",".wpte-onoff-block:not(.wpte-floated) .wpte-onoff-toggle",(function(){e(this).toggleClass("active"),e(this).siblings(".wpte-onoff-popup").stop(!0,!1,!0).slideToggle()})),e(document).on("click",".wpte-onoff-block.wpte-floated .wpte-onoff-toggle",(function(){return e(this).toggleClass("active"),e(this).siblings(".wpte-onoff-popup").fadeToggle(),!1})),e(document).on("click",".wpte-settings .wpte-repeater-block .wpte-system-btns .wpte-toggle-btn",(function(){e(this).parents(".wpte-repeater-block").toggleClass("wpte-disabled")})),e(document).on("click",".wpte_save_continue_link",(function(t){t.preventDefault();var a=".wpte-tab-content.content_loaded",n=!1;if(e(a+" input, "+a+" select, "+a+" textarea").each((function(t){if(e(this).parsley().validate(),!e(this).parsley().isValid()){n=!0;var a=e(this).parents(".wpte-tab-content").data("trigger");return e(".wpte-tab-wrap a."+a).click(),e(this).focus(),console.debug({invalidField:this}),!1}})),n)toastr.error(WTE_UI.validation_error);else{var i={};e(a+" input, "+a+" select, "+a+" textarea").each((function(t){if(filterby=e(this).attr("name"),filterby_val=e(this).val(),void 0===i[filterby]&&(i[filterby]=[]),"checkbox"==e(this).attr("type")||"radio"==e(this).attr("type"))1==e(this).data("multiple")?e(this).is(":checked")&&i[filterby].push(filterby_val):e(this).is(":checked")&&(i[filterby]=filterby_val);else if(e(this).is("textarea")&&e(this).closest(".tmce-active").size()>0){id=e(this).attr("id");var a=tinymce.get(id).getContent();i[filterby]=a}else i[filterby]=filterby_val})),i.next_tab=e(this).data("next-tab"),i.tab=e(this).data("tab"),i.action="wpte_tab_trip_save_and_continue",i.nonce=e(this).data("nonce"),i.post_id=e(this).data("post-id");var o=e('a[data-callback="'+i.next_tab+'"]');e.ajax({url:ajaxurl,data:i,type:"post",dataType:"json",beforeSend:function(t){e(".wpte-loading-anim").show()},success:function(t){e(".wpte-loading-anim").hide(),t.success&&(wp?.data?.dispatch("core/notices")?.createSuccessNotice?(o.trigger("click"),wp.data.dispatch("core/notices").createSuccessNotice(t.data.message).then((e=>{e?.notice?.id&&setTimeout((function(){wp.data.dispatch("core/notices").removeNotice(e.notice.id)}),3e3)}))):toastr.success(t.data.message))}})}})),e(".wte-global-tabs-holder").sortable(),e(document).on("click",".wpte-add-glb-tab",(function(t){t.preventDefault();var a=wp.template("wpte-glb-tabs-row"),n=Math.max.apply(null,e(".wte-global-tabs-holder .trip-tabs-id").map((function(){return parseInt(e(this).val(),10)||0})).get())+1;jQuery(".wte-global-tabs-holder").append(a({key:n}))})),e(document).on("click",".wpte-remove-glb-tab",(function(t){t.preventDefault(),e(this).parents(".wpte-glb-tab-row").remove()})),e(".wpte-glb-trp-infos-holdr").sortable(),e(document).on("click",".wpte-add-glb-trp-info",(function(e){e.preventDefault();var t=wp.template("wpte-add-trip-info-block"),a=Math.floor(99999998*Math.random())+1;jQuery(".wpte-glb-trp-infos-holdr").append(t({key:a})),++a})),e(document).on("click",".wpte-remove-glb-ti",(function(t){t.preventDefault(),e(this).parents(".wpte-glb-trp-infos-row").remove()})),e(document).on("click",".wpte-save-global-settings",(function(t){t.preventDefault();var a=".wpte-global-settngstab.content_loaded",n={};e(a+" input, "+a+" select, "+a+" textarea").each((function(t){if(filterby=e(this).attr("name"),filterby_val=e(this).val(),void 0===n[filterby]&&(n[filterby]=[]),"checkbox"==e(this).attr("type")||"radio"==e(this).attr("type"))1==e(this).data("multiple")?e(this).is(":checked")&&n[filterby].push(filterby_val):e(this).is(":checked")&&(n[filterby]=filterby_val);else if(e(this).is("textarea")&&e(this).closest(".tmce-active").size()>0){id=e(this).attr("id");var a=tinymce.get(id).getContent();n[filterby]=a}else e(this).is("textarea")&&0==e(this).closest(".tmce-active").size()?(a=p(filterby_val),n[filterby]=a):n[filterby]=filterby_val})),n.action="wpte_global_tabs_save_data",n.nonce=e(this).data("nonce"),n.tab=e(this).data("tab"),e.ajax({url:ajaxurl,data:n,type:"post",dataType:"json",beforeSend:function(t){e(".wpte-loading-anim").show()},success:function(t){e(".wpte-loading-anim").hide(),t.success&&toastr.success(t.data.message)}})}))}function a(){var e=jQuery("#trip_pricing_id");if(e.length)return jQuery("html,body").animate({scrollTop:e.offset().top},500,"swing"),!1}function n(){jQuery(".wpte-multi-pricing-wrap").sortable(),jQuery("#wpte-adult-price-pertype-sel").change((function(e){e.preventDefault(),jQuery("#wpte-trip-default-pper").val(jQuery(this).val())}))}function i(){jQuery(".wte-add-trip-highlight").on("click",(function(e){e.preventDefault();var t=Math.floor(99999998*Math.random())+1,a=wp.template("tour-highlight-row");jQuery(".wpte-trip-highlights-hldr").append(a({key:t})),jQuery('input[name="wp_travel_engine_setting[trip_highlights]['+t+'][highlight_text]"]').focus(),++t,jQuery(".wte-delete-highlight:last").on("click",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-trp-highlight").remove()}))})),jQuery(".wte-delete-highlight").on("click",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-trp-highlight").remove()})),jQuery(".wpte-trip-highlights-hldr").sortable()}function o(){jQuery(".wpte-add-itinerary").on("click",(function(e){e.preventDefault();var t=0<jQuery(".wpte-itinerary-repeter").length?jQuery(".wpte-itinerary-repeter").length+1:1,a=wp.template("wpte-add-iti-row");jQuery(".wpte-remove-iti").remove(),jQuery("#wpte-itinerary-repeter-holder").append(a({key:t})),++t})),jQuery(document).on("click",".wpte-remove-iti:last",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-itinerary-repeter").remove(),jQuery(".wpte-itinerary-repeter:last").append('<button class="wpte-delete wpte-remove-iti"></button>')}))}function r(){jQuery("body").on("click",".add-info",(function(e){e.preventDefault();var t=jQuery("#wte_global_trip_facts").find(":selected").val();if(""==t)return jQuery("#wte_global_trip_facts").css("-webkit-box-shadow","inset 0px 0px 1px 1px red"),jQuery("#wte_global_trip_facts").css("-moz-box-shadow","inset 0px 0px 1px 1px red"),void jQuery("#wte_global_trip_facts").css("box-shadow","inset 0px 0px 1px 1px red");jQuery("#wte_global_trip_facts").css("-webkit-box-shadow","inset 0px 0px 0px 0px red"),jQuery("#wte_global_trip_facts").css("-moz-box-shadow","inset 0px 0px 0px 0px red"),jQuery("#wte_global_trip_facts").css("box-shadow","inset 0px 0px 0px 0px red"),nonce=jQuery("#wte_global_trip_facts").attr("data-nonce"),jQuery.ajax({type:"post",url:ajaxurl,data:{action:"wp_add_trip_info",val:t,nonce},beforeSend:function(){},success:function(e){jQuery(".wpte-trip-facts-hldr").append(e),jQuery(".wpte-remove-trp-fact:last").on("click",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-trip-fact-row").remove()}))}})})),jQuery(".wpte-remove-trp-fact").on("click",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-trip-fact-row").remove()})),jQuery(".wpte-trip-facts-hldr").sortable()}function s(){var e;$=jQuery;var t=["image/jpeg","image/png","image/webp"];function a(){$(".wpte-gallery").length&&$(".wpte-gallery").sortable({opacity:.9,revert:!0})}function n(e,t){var a=wp.template("wpte-trip-videogallery-row"),n=Math.floor(990*Math.random())+10,i=t;$(".wp-travel-engine-trip-video-gallery").append(a({index:n,video_data:e,thumb:i})),$("input#wte-trip-vid-url").val(""),$(".wte-video-list-srtable").sortable()}a(),$(document).on("click",".wpte-add-gallery-img",(function(n){n.preventDefault(),$(this),e&&e.close(),e=wp.media.frames.file_frame=wp.media({title:$(this).data("uploader-title"),button:{text:$(this).data("uploader-button-text")},library:{type:t},multiple:!0});var i=Math.floor(99999998*Math.random())+1;e.on("select",(function(){e.state().get("selection").map((function(e,t){e=e.toJSON();var a=i+t,n=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,o='<div class="wpte-gal-img"><input type="hidden" readonly name="wpte_gallery_id['+a+']" value="'+e.id+'"><img src="'+n+'" alt=""><div class="wpte-gal-btns"><button class="wpte-change wpte-change-gal-img"></button><button class="wpte-delete wpte-delete-gal-img"></button></div></div>';$(o).insertBefore("#wpte-gal-img-upldr-btn")}))})),a(),e.open()})),$(document).on("click",".wpte-change-gal-img",(function(a){a.preventDefault();var n=$(this);e&&e.close(),(e=wp.media.frames.file_frame=wp.media({title:$(this).data("uploader-title"),button:{text:$(this).data("uploader-button-text")},library:{type:t},multiple:!1})).on("select",(function(){attachment=e.state().get("selection").first().toJSON(),n.parents(".wpte-gal-img").children('input[type="hidden"]').val(attachment.id),n.parents(".wpte-gal-img").children("img").attr("src",attachment.sizes.thumbnail.url)})),e.open()})),$(document).on("click",".wpte-delete-gal-img",(function(e){e.preventDefault(),$(this).parents(".wpte-gal-img").remove()})),$(".wp-travel-engine-trip-video-gallery-add-video").click((function(e){e.preventDefault();var t=$("input#wte-trip-vid-url").val();if(""!=t){var a,i=function(e){e.match(/(http:\/\/|https:\/\/|)(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);var t=null;return RegExp.$3.indexOf("youtu")>-1?t="youtube":RegExp.$3.indexOf("vimeo")>-1&&(t="vimeo"),{type:t,id:RegExp.$6}}(t);null!=i.type&&""!=i.id?"youtube"==(a=i).type?n(a,"//img.youtube.com/vi/"+a.id+"/hqdefault.jpg"):"vimeo"==a.type&&$.get("//vimeo.com/api/v2/video/"+a.id+".json",(function(e){n(a,e[0].thumbnail_medium)})):toastr.error(WTE_UI.invalid_url)}else toastr.error(WTE_UI.novid)})),$(document).on("click",".wp-travel-engine-trip-video-gallery .remove-video",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;$(this).parent("small").parent("li").remove()})),$(".wte-video-list-srtable").sortable()}function l(){var e;$=jQuery;var t=["image/jpeg","image/png","image/webp"];$(document).on("click","#wpte-upload-map-img",(function(a){a.preventDefault(),$(this),e&&e.close(),(e=wp.media.frames.file_frame=wp.media({title:"Upload Map image",button:{text:"Upload image"},library:{type:t},multiple:!1})).on("select",(function(){e.state().get("selection").map((function(e,t){e=e.toJSON(),$("#map-image-prev-hldr").attr("src",e.sizes.medium.url),$('input[name="wp_travel_engine_setting[map][image_url]"]').val(e.id),$(".wpte-delete-map-img").show()}))})),e.open()})),$(document).on("click",".wpte-delete-map-img",(function(e){e.preventDefault();var t=confirm(WTE_UI.suretodel),a=$(this).data("fallback");if(!t)return!1;$("#map-image-prev-hldr").attr("src",a),$('input[name="wp_travel_engine_setting[map][image_url]"]').val(""),$(this).hide()}))}function c(){function e(e,t=!1){if(document.getElementById(e+"_ifr"))return;const a=wp.editor.initialize||wp.oldEditor.initialize,n=wp.editor.remove||wp.oldEditor.remove;t&&n&&n(e),a&&a(e,{tinymce:{wpautop:!0},quicktags:!0})}jQuery(document).on("click",".wpte-faq-block .wpte-faq-title",(function(){jQuery(this).parents(".wpte-faq-block").toggleClass("wpte-active"),jQuery(this).parents(".wpte-faq-title-wrap").siblings(".wpte-faq-content").stop(!0,!1,!0).slideToggle()})),(()=>{jQuery(document).on("click",".wpte-add-faq-blck",(function(t){t.preventDefault();var a=0<jQuery(".wpte-faq-block-row").length?jQuery(".wpte-faq-block-row").length+1:1,n=wp.template("wpte-faq-block-tmp");jQuery(".wpte-faq-block-hldr").append(n({key:a})),document.getElementById("wp_travel_engine_setting_faq_content_"+a)&&e("wp_travel_engine_setting_faq_content_"+a)}));const t=document.querySelectorAll("[id^=wp_travel_engine_setting_faq_content_]");t&&t.forEach((t=>{t.addEventListener("focus",(function(){e(t.id)}))}))})(jQuery),jQuery(document).on("click",".wpte-del-faq",(function(e){if(e.preventDefault(),!confirm(WTE_UI.suretodel))return!1;jQuery(this).parents(".wpte-faq-block-row").remove()})),jQuery(".wpte-faq-block-hldr").sortable()}function p(e){if(null!=e&&""!=e){var t=document.createElement("textarea"),a=e.replace(/&amp;/g,"&");return t.innerHTML=a,t.value}}!function(d){function u(e){var t=e.attr("class").split(" ")[1];e.siblings(".wpte-tab").removeClass("current"),e.addClass("current"),e.parents(".wpte-tab-wrap").siblings(".wpte-tab-content-wrap").children(".wpte-tab-content").removeClass("current"),e.parents(".wpte-tab-wrap").siblings(".wpte-tab-content-wrap").children("."+t+"-content").addClass("current content_loaded"),a()}jQuery(document).ready((function(a){t(),i(),a(".wpte-tab-nav").click((function(t){t.preventDefault();var d=a(this),g=a(this).data("tab-details"),w=g.content_key;if(a(this).hasClass("content_loaded"))return u(d),void document.dispatchEvent(new CustomEvent("wteTripEditTabContentLoaded",{detail:{contentKey:w}}));var m={action:"wpte_admin_load_tab_content",tab_details:g,post_id:a(this).data("post-id"),next_tab:a(this).data("next-tab"),nonce:a(this).data("nonce")};a.ajax({url:ajaxurl,data:m,type:"post",dataType:"json",beforeSend:function(e){a(".wpte-loading-anim").show()},success:function(t){if(a(".wpte-loading-anim").hide(),t.success){var g=t.data.html;switch(a("#wte-trip-edit-tabs").append(g),a(".wpte-tab-content-wrap textarea").each((function(){a(this).val(p(a(this).val()))})),u(d),e("wpte_after_admin_tab_shown",w),w){case"wpte-pricing":n();break;case"wpte-overview":i();break;case"wpte-itinerary":o();break;case"wpte-facts":r();break;case"wpte-gallery":s();break;case"wpte-map":l();break;case"wpte-faqs":c()}d.addClass("content_loaded"),document.dispatchEvent(new CustomEvent("wteTripEditTabContentLoaded",{detail:{contentKey:w}}))}}})})),(()=>{const e=document.querySelector('[name="wp_travel_engine_setting[trip_duration_unit]"]');document.addEventListener("wteTripEditTabContentLoaded",(function(t){if("wpte-pricing"==t?.detail?.contentKey){const t=document.querySelector(".wpte-pricing-content")?.querySelectorAll(".wpte-weekly-houly-feature-wrap");"hours"==e.value?t&&Array.from(t).forEach((e=>e.style.removeProperty("display"))):t&&Array.from(t).forEach((e=>e.style.display="none"))}}))})(),a(document).on("click",".wpte_load_global_settings_tab",(function(t){t.preventDefault();var n=a(this);if(a(this).hasClass("content_loaded"))u(n);else{var i=a(this).data("tab-data"),o=a(this).data("content-key"),r={action:"wpte_global_settings_load_tab_content",tab_details:i,content_key:o,nonce:a(this).data("nonce")};a.ajax({url:ajaxurl,data:r,type:"post",dataType:"json",beforeSend:function(e){a(".wpte-loading-anim").show()},success:function(t){if(a(".wpte-loading-anim").hide(),t.success){var i=t.data.html;switch(a(".wpte-global-settings-tbswrp").append(i),u(n),e("wpte_after_global_settings_tab_shown",o),o){case"wpte-miscellaneous":case"wpte-extensions":case"wpte-payment":a("select.wpte-enhanced-select").select2()}n.addClass("content_loaded"),document.dispatchEvent(new CustomEvent("wteSettingsTabContentLoaded",{detail:{contentKey:o}}))}}})}})),a(document).on("click",".wptravelengine_test_email",(function(e){e.preventDefault();var t={action:"wptravelengine_send_test_email",nonce:a(this).data("nonce"),content:a(this).data("tab"),template:a("#wptravelengine_test_template").val(),email:a("#wptravelengine_send_to_email").val()};a.ajax({url:ajaxurl,data:t,type:"post",dataType:"json",beforeSend:function(e){a(".wpte-loading-anim").show()},success:function(e){a(".wpte-loading-anim").hide(),e.success?toastr.success(e.data.message):toastr.error(e.data.message)}})})),a(document).on("change keyup","*[bind]",(function(e){var t=a(this).attr("bind"),n=""!=a(this).val()?a(this).val():"";a("*[bind='"+t+"']").val(n)})),a(document).on("change keyup","*[bindSale]",(function(e){var t=a(this).attr("bindSale"),n=""!=a(this).val()?a(this).val():"";a("*[bindSale='"+t+"']").val(n)})),a(document).on("change",'input[name="wp_travel_engine_setting[multiple_pricing][adult][enable_sale]"]',(function(e){a("#wpte-trip-enb-sale-price").prop("checked",this.checked)})),a(document).on("click",".wpte-copy-btn",(function(e){e.preventDefault();var t=a(this).data("copyid"),n=document.getElementById(t);n.select(),n.setSelectionRange(0,99999),document.execCommand("copy"),toastr.success(WTE_UI.copied)})),function(){const e=document.querySelector(".wp-travel-engine-font-awesome-list-template");jQuery(document).on("click",".wpte-add-icon",(function(t){t.preventDefault();const a=this.parentNode.querySelector(".wpte-font-awesome-list");a?a.remove():this.insertAdjacentHTML("afterend",e.innerHTML)}))}(),a(document).on("click",".wpte-font-awesome-list li",(function(e){e.preventDefault();var t=a(this).children("svg"),n=a(this).children("svg").attr("data-prefix")+" fa-"+a(this).children("svg").attr("data-icon");a(this).parent().parent().siblings(".trip-tabs-icon").attr("value",n),a(this).parent().parent().siblings(".trip-tabs-icon").siblings("span.wpte-icon-preview").children(".wpte-icon-holdr").html(t),a(this).parent().parent().fadeOut("slow",(function(){})),a(this).parent().parent().siblings(".trip-tabs-icon").siblings(".wpte-font-awesome-list").remove(),a(this).parents(".wpte-icons-holder").find(".wpte-ico-search").remove()})),a(document).on("click",".wpte-remove-icn-btn",(function(e){e.preventDefault(),a(this).siblings(".wpte-icon-holdr").html(""),a(this).parents(".wpte-icon-preview").siblings(".trip-tabs-icon").val("")})),a(document).on("keyup",".wpte-ico-search",(function(){var e=a(this).val(),t=new RegExp(e,"gi");a(this).parent(".wpte-font-awesome-list").find("li").show().not((function(){return t.test(a(this).find("svg").attr("data-icon"))})).hide()})),a(".wpte-enhanced-select").select2({allowClear:!0,closeOnSelect:!1}),a(".wp-travel-engine-datetime").datepicker({dateFormat:"yy-mm-dd"}),a(document).on("click",".wpte-edit-bkng",(function(e){e.preventDefault(),a(this).parents(".wpte-block").find(".wpte-block-content").fadeOut("slow").css({height:0,"padding-top":0,"padding-bottom":0,overflow:"hidden"}),a(this).parents(".wpte-block").find(".wpte-block-content-edit").fadeIn("slow").css("height","auto")})),a(document).on("click",".wpte-edit-prsnl-details",(function(e){e.preventDefault(),a(this).parents(".wpte-prsnl-dtl-blk").find(".wpte-prsnl-dtl-blk-content").fadeOut("slow").css({height:0,"margin-top":0,overflow:"hidden"}),a(this).parents(".wpte-prsnl-dtl-blk").find(".wpte-prsnl-dtl-blk-content-edit").fadeIn("slow").css("height","auto")})),a(".wpte-glb-trp-infos-row").each((function(){"select"==a(this).find("select option:selected").val()?(a(this).find(".select-options").show(),a(this).find(".input-placeholder").hide()):(a(this).find(".select-options").hide(),a(this).find(".input-placeholder").show())})),a("body").on("change",".wpte-trp-inf-fieldtyp",(function(e){"select"==a(this).find("select option:selected").val()?a(this).siblings(".wpte-field").find(".select-options").fadeIn("slow"):a(this).siblings(".wpte-field").find(".select-options").hide(),"text"==a(this).find("select option:selected").val()||"number"==a(this).find("select option:selected").val()||"textarea"==a(this).find("select option:selected").val()?a(this).siblings(".wpte-field").find(".input-placeholder").fadeIn("slow"):a(this).siblings(".wpte-field").find(".input-placeholder").hide()}))})),d((function(){jQuery((function(e){e(document).on("click",".wpte-rich-textarea",(function(t){var a=e(this),n=e(this).find("textarea.wte-editor-area").attr("id");a.hasClass("delay")&&(a.find(".wte-editor-notice").remove(),a.removeClass("delay"),function(e){wp.editor.initialize?wp.editor.initialize(e,{tinymce:{wpautop:!0,plugins:"charmap colorpicker compat3x directionality fullscreen hr image lists media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wptextpattern wpview",toolbar1:"bold italic underline strikethrough | bullist numlist | blockquote hr wp_more | alignleft aligncenter alignright | link unlink | fullscreen | wp_adv",toolbar2:"formatselect alignjustify forecolor | pastetext removeformat charmap | outdent indent | undo redo | wp_help"},quicktags:!0,mediaButtons:!0}):wp.oldEditor.initialize&&wp.oldEditor.initialize(e,{tinymce:{wpautop:!0,plugins:"charmap colorpicker compat3x directionality fullscreen hr image lists media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wptextpattern wpview",toolbar1:"bold italic underline strikethrough | bullist numlist | blockquote hr wp_more | alignleft aligncenter alignright | link unlink | fullscreen | wp_adv",toolbar2:"formatselect alignjustify forecolor | pastetext removeformat charmap | outdent indent | undo redo | wp_help"},quicktags:!0,mediaButtons:!0})}(n))})),toastr.options.positionClass="toast-bottom-full-width",e(document).on("click",".wp-travel-engine-featured-trip",(function(t){t.preventDefault();var a=e(this),n={action:"wp_travel_engine_featured_trip",post_id:e(this).attr("data-post-id"),nonce:e(this).attr("data-nonce")};e.ajax({url:ajaxurl,data:n,type:"post",dataType:"json",success:function(e){"invalid"!=e&&(a.removeClass("dashicons-star-filled").removeClass("dashicons-star-empty"),"yes"==e.new_status?a.addClass("dashicons-star-filled"):a.addClass("dashicons-star-empty"))}})})),e(document).on("click",".wp-travel-engine-featured-term",(function(t){t.preventDefault();var a=e(this),n={action:"wp_travel_engine_featured_term",post_id:e(this).attr("data-term-id"),nonce:e(this).attr("data-nonce")};e.ajax({url:ajaxurl,data:n,type:"post",dataType:"json",success:function(e){"invalid"!=e&&(a.removeClass("dashicons-star-filled").removeClass("dashicons-star-empty"),"yes"==e.new_status?a.addClass("dashicons-star-filled"):a.addClass("dashicons-star-empty"))}})})),e(document).on("click",".wpte-tab-wrap .wpte-tab",(function(){var t=e(this).attr("class").split(" ")[1];e(this).siblings(".wpte-tab").removeClass("current"),e(this).addClass("current"),e(this).parents(".wpte-tab-wrap").siblings(".wpte-tab-content-wrap").children(".wpte-tab-content").removeClass("current"),e(this).parents(".wpte-tab-wrap").siblings(".wpte-tab-content-wrap").children("."+t+"-content").addClass("current content_loaded")}))}))})),(()=>{document.querySelectorAll(".wpte-tab")?.forEach((e=>{""!=e.dataset.target&&e.addEventListener("click",(e=>{const t=e.currentTarget;e.preventDefault(),function(e,t=100){const a=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:a,behavior:"smooth"})}(document.querySelector(`[data-target-id=${t.dataset.target}]`),130)}))}));var e=document.querySelectorAll(".wpte-form-section"),t={},a=0;Array.prototype.forEach.call(e,(function(e){t[e.dataset?.targetId]=e.offsetTop})),window.onscroll=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;for(a in t)t[a]<=e&&(document.querySelector(".is-active").classList.remove("is-active"),document.querySelector(`[data-target=${a}]`).parentElement.classList.add("is-active"))}})()}(jQuery),window.wpte_add_action=function(e,t,a){a||(a=10),a>100&&(a=100),a<0&&(a=0),"undefined"==typeof actions&&(actions={}),void 0===actions[e]&&(actions[e]=[]),void 0===actions[e][a]&&(actions[e][a]=[]),actions[e][a].push(t)},window.wpte_do_action=e,window.wpte_core_ui_fxn=t,window.wpte_trip_edit_scrolltop=a,window.wpte_tab_wpte_pricing=n,window.wpte_tab_wpte_overview=i,window.wpte_tab_wpte_itinerary=o,window.wpte_tab_wpte_trip_facts=r,window.wpte_tab_wpte_gallery=s,window.wpte_tab_wpte_map=l,window.wpte_tab_wpte_faq=c,window.decodeEntities=p,document.querySelectorAll(".wpte-dropdown").forEach((e=>{e.querySelector(".wpte-dropdown-button").addEventListener("click",(()=>{e.classList.toggle("open")}))})),document.addEventListener("click",(e=>{const t=document.querySelector(".wpte-dropdown");t?.closest(".wpte-dropdown")?.contains(e.target)||t?.closest(".wpte-dropdown")?.classList.remove("open")}))})(),jQuery(document).ready((function(e){e(".wte-preview-enquiry").click((function(t){t.preventDefault();var a={enquiry_id:e(this).data("enquiryid"),action:"wte_get_enquiry_preview",_nonce:this.dataset.nonce},n=e(this);e.ajax({url:ajaxurl,data:a,type:"post",dataType:"json",beforeSend:function(){n.removeClass("dashicons-welcome-view-site").addClass("dashicons-update-alt")},success:function(e){e.success&&(jQuery.fancybox.open({src:e.data.html,type:"inline",baseClass:"wte-fb-popup"}),n.addClass("dashicons-welcome-view-site").removeClass("dashicons-update-alt"))}})}))})),jQuery(document).ready((function(e){e(".wp-travel-meta-datetime, .wp-travel-engine-datetime").datepicker({dateFormat:"yy-mm-dd"}),e(document).on("click",".wte-clone-post",(function(t){t.preventDefault();var a={post_id:e(this).data("post_id"),security:e(this).data("security"),action:"wte_fxn_clone_trip_data"};e.ajax({url:ajaxurl,data:a,type:"post",dataType:"json",success:function(e){e.success?location.href=e.data.edit_link||location.href:location.href=location.href}})}))})),function(){let e=document.getElementById("wpte-booking-export-form");if(e){let t=document.querySelector(".wrap"),a=document.querySelector(".page-title-action");t.style.marginTop="45px",a.after(e);const n=document.getElementById("wpte-booking-export-open-modal"),i=document.querySelector(".wpte-booking-export-modal-overlay"),o=document.querySelector(".wpte-booking-export-modal"),r=o.querySelector(".wpte-booking-modal-close"),s=document.querySelector("#wte-flatpickr__date-range"),l=document.querySelector("#wpte-booking-export-date");s.addEventListener("change",(function(e){l.value=e.target.value})),l.addEventListener("change",(function(e){s.value=e.target.value}));const c=()=>{o.classList.add("closing"),i.style.opacity=0,setTimeout((()=>{i.style.display="none",i.style.opacity=1,o.classList.remove("closing")}),200)};n&&(n.addEventListener("click",(function(){i.style.display="block",i.style.opacity=0,setTimeout((()=>{i.style.opacity=1}),100)})),i.addEventListener("click",(function(e){o.contains(e.target)||c()})),r.addEventListener("click",c))}}(),(()=>{let e=null;document.addEventListener("click",(t=>{if(Array.from(t.target.classList)?.indexOf("wpte-add-account")>-1){e=e||document.getElementById("wte-bank-transfer-accounts-table");let t=document.createElement("tr"),a=e&&e.querySelector("tbody"),n=a&&a.querySelectorAll("tr")&&a.querySelectorAll("tr").length||0,i=`<td></td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][account_name]"/>\n            </td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][account_number]"/>\n            </td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][bank_name]"/>\n            </td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][sort_code]"/>\n            </td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][iban]"/>\n            </td>\n            <td>\n                <input type="text" name="wp_travel_engine_settings[bank_transfer][accounts][${n}][swift]"/>\n            </td>\n            <td><button class="wpte-btn wpte-danger wpte-remove-account">X</button></td>`;t.innerHTML=i,a&&a.appendChild(t)}if(Array.from(t.target.classList)?.indexOf("wpte-remove-account")>-1){let e=t.target.closest("tr");e&&e.remove()}}))})(),(()=>{const{ui:{Accordion:e},util:t,api:a}=window.wteL10n,n=(e,t=null)=>{if(t){let e=t.dataset.fpconfig?JSON.parse(t.dataset.fpconfig):{};flatpickr(t,e)}else e.querySelectorAll(".wte-flatpickr")?.forEach((e=>{let t=e.dataset.fpconfig?JSON.parse(e.dataset.fpconfig):{};flatpickr(e,t)}))};class i{constructor(e){var t;e&&(this.store=null),this._state={trip:{},packages:{}},this._store=Redux.createStore(((e,t)=>"UPDATE_STORE"===t.type?{...e,...t.data}:e),{loading:!0},Redux.applyMiddleware((e=>t=>a=>"function"==typeof a?a(e.dispatch,e.getState):t(a)))),this.state$=(t=this._store,new rxjs.Observable((e=>(e.next(t),t.subscribe((()=>{e.next(t)}))))));const n=this.state$.pipe(rxjs.operators.map((e=>e.getState().tripPackages)));n.subscribe((e=>{let t;return a=>{lodash.isEqual(t,a)||(t=a,e.renderPackages())}})(this)),this._store.dispatch(((t,n)=>{var i;let o=new Headers;o.set("X-WP-Nonce",wpApiSettings.nonce);let r=a.get("trip",{id:e.tripID,context:"edit"},{headers:o}),s=a.get("categories"),l=null!==(i=r.packages_ids)&&void 0!==i?i:[],c=[];try{if(!l)throw new Error(`No packages assigned to this trip - ${r.id}`);c=a.get("packages",{trip_id:e.tripID,per_page:100,context:"edit"},{headers:o})}catch(e){console.warn("WTEBOOKING: "+e.message)}Promise.all([r,s,c]).then((e=>{const[a,n,i]=e;let o={};for(let e in i){let t=i[e],a={},r=t["package-categories"];for(let t of Object.keys(n))a={...a,[t]:{packageID:+e,categoryID:+t,...r[t]}};i[e]["package-categories"]=a,o={...o,[e]:{packageCategories:a,groupDiscountPricing:t["group-pricing"]||{},packageDates:t["package-dates"]?lodash.keyBy(t["package-dates"],(e=>e.dtstart.split("-").join(""))):{}}}}t({type:"UPDATE_STORE",data:{loading:!1,trip:a,tripPackagesIds:a.packages_ids||[],tripPackages:i,packageCategoriesCollection:n,editFormData:o}})}))})),this.packageTemplate=wp.template("wte-package"),this.datesTemplate=wp.template("wte-package-dates"),this.dateTemplate=wp.template("wte-package-date"),this.categoriesTemplate=wp.template("wte-package-categories"),this.categoryTemplate=wp.template("wte-package-category")}addPackageToStore(e){let{tripPackages:t,tripPackagesIds:a,packageCategoriesCollection:n,editFormData:i}=this._store.getState(),o=e.id,r={},s=e["package-categories"];for(let e of Object.keys(n))r={...r,[e]:{packageID:+o,categoryID:+e,enabledSale:!(!s?.enabled_sale||!s?.enabled_sale[e]),label:n[e].name,maxPax:s?.max_paxes&&+s.max_paxes[e]||"",minPax:s?.min_paxes&&+s.min_paxes[e]||0,price:s?.prices&&+s.prices[e]||"",salePrice:s?.sale_prices&&+s.sale_prices[e]||""}};let l={};l={...l,[o]:{packageCategories:r,groupDiscountPricing:e["group-pricing"]||{},packageDates:e["package-dates"]||[]}},this._store.dispatch({type:"UPDATE_STORE",data:{tripPackages:{...t,[e.id]:e},tripPackagesIds:[...a,e.id],editFormData:{...i,...l}}})}renderPackages(){if(this._store.getState().loading)return;let{tripPackages:a,editFormData:n,trip:i}=this._store.getState(),o=document.getElementById("wte-packages-list"),r=document.querySelector("#wte-packages-wrapper .wpte-repeater-hading");r&&Object.keys(a)?.length>0&&r.style.removeProperty("display");let s=i?.packages_ids?i?.packages_ids:Object.keys(a),l=new Set([...s,...Object.keys(a)]);for(let e of l){if(document.getElementById(`wte-package-${e}`))continue;let t=a[e];if(!t)continue;let i=this.packageTemplate({packageID:+e,tripPackage:a[e]}),r=document.createElement("div");r.innerHTML=i;let s=r.firstElementChild,l=s.querySelector(`#wpte-tab-pricing-general-${e}`);l&&(l.innerHTML=wp.template("wte-package-general")({store:this._store.getState(),categories:this._store.getState().editFormData[e].packageCategories,tripPackage:t}));let c=s.querySelector(`#wpte-tab-pricing-categories-${e}`);c.innerHTML=wp.template("wte-package-categories")({store:this._store.getState(),tripPackage:t});let p=c.querySelector(`#wte-package-categories_${e}`);for(let t in this._store.getState().editFormData[e].packageCategories){let a=this._store.getState().editFormData[e].packageCategories[t],n=wp.template("wte-package-category")({store:this._store.getState(),category:a});r.innerHTML=n;let i=r.firstElementChild,o=p.appendChild(i).querySelector(`#wte-group-discount-pricing_${e}_${a.categoryID}`);o&&(o.innerHTML=wp.template("wte-group-discount-pricing")({store:this._store.getState(),packageID:e,categoryID:a.categoryID,groupDiscount:this._store.getState().editFormData[e].groupDiscountPricing[a.categoryID]||[]}))}let d=s.querySelector(`#wpte-tab-pricing-dates-${e}`);d.innerHTML=wp.template("wte-package-dates")({store:this._store.getState(),tripPackage:t,tripDurationType:document.querySelector('[name="wp_travel_engine_setting[trip_duration_unit]"]')?.value});let u=d.querySelector(`#wte-package-dates-list_${e}`);u&&(u.innerHTML=(t=>{let a="";for(let i in n[e].packageDates){let o=n[e].packageDates[i];a+=this.dateTemplate({tripPackage:t,dateIndex:o.dtstart.split("-").join(""),date:o})}return a})(t)),o.appendChild(s)}if(o.querySelector(".wpte-loading-anim")?.remove(),o&&jQuery?.fn?.sortable){let e=document.querySelector('[name="trip-edit-tab__sorted-packages"]');jQuery(o).sortable({stop:function(t,a){if(e&&o){let t=o.querySelectorAll("[name*=packages_ids]");if(t){let a=Array.from(t).map((e=>e.value));e.value=a.toString()}}}})}document.getElementById("wte-packages").querySelectorAll(".wte-flatpickr")?.forEach((e=>{let t=e.dataset.fpconfig?JSON.parse(e.dataset.fpconfig):{};flatpickr(e,t)})),document.getElementById("wte-packages").querySelectorAll(".wte-accordion")?.forEach((a=>{t.hasClass(a,"wte-accordion-initialized")||function(t){new e(t)}(a)})),document.dispatchEvent(new Event("wteEditPackageRender")),console.debug("wteEditPackageRender event dispatched")}}(()=>{document.addEventListener("wteTripEditTabContentLoaded",(e=>{"wpte-pricing"!==e.detail.contentKey||wteL10n.legacy||(window.wteEdit.editAPI=new i(wteEdit))}));const o=(t,a=null)=>{a?(t=>{new e(t)})(a):t.querySelectorAll(".wte-accordion")?.forEach((t=>{(t=>{new e(t)})(t)}))};function r(e,t,a,n,i){let o=t.split("-").join("");if(e[o])return;let r={dtstart:t,seats:"",availability_label:"",is_recurring:!1,rrule:{}};e={...e,[o]:r};let s=document.createElement("div");s.innerHTML=wp.template("wte-package-date")({tripPackage:n[a],date:r,dateIndex:o}),i?.appendChild(s.firstElementChild)}document.addEventListener("click",(async function(e){if("wte-add-new-package"===e.target.id){e.preventDefault();var t={packages:[],categories:[]},a=await fetch(`${wpApiSettings.root+wpApiSettings.versionString}packages`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({title:document.getElementById("package_title").value,status:"publish",post_type:"trip-packages"})}),n=await a.json();n.id&&(t.packages=[n]),a=await fetch(`${wpApiSettings.root+wpApiSettings.versionString}package-categories`);var i=await a.json();i&&(t.categories=i);var o=wp.template("wte-package");document.getElementById("wte-packages").innerHTML=o(t)}})),t.on("click",".wte-package-delete",(e=>{e.preventDefault(),confirm("Are you sure? This will delete the package from the trip.")&&a.removePackage({id:e.target.dataset.packageId}).then((e=>{if(e.id||"rest_already_trashed"===e.code){const t=wteEdit.editAPI._store;let a={...t.getState().tripPackages};if(delete a[e.id],document.getElementById(`wte-package-${e.id}`)?.remove(),Object.keys(a).length<=0){let e=document.querySelector("#wte-packages-wrapper .wpte-repeater-hading");e&&(e.style.display="none")}t.dispatch({type:"UPDATE_STORE",data:{tripPackages:a}})}}))})),t.on("click",".wte-package-category-add",(e=>{e.preventDefault();let t=document.getElementById(e.target.dataset.target).value,a=e.target.dataset.packageId,n=wteEdit.api.packages[a];if(n["package-categories"]&&n["package-categories"]?.c_ids){if(n["package-categories"]?.c_ids.indexOf(t)>-1)return;n["package-categories"].c_ids=[...n["package-categories"].c_ids,t]}else n["package-categories"]={c_ids:[t]};wteEdit.api.packages[a]=n,window.wteEdit.editAPI.addPackageToStore()})),t.on("click",".wte-package-category-edit",(e=>{e.preventDefault();const t=e.target.dataset.categoryIndex,a=e.target.dataset.packageId;t&&a&&jQuery.fancybox.open({src:jQuery(document.getElementById(`wte-package-category-editor_${a}_${t}`)),type:"inline",baseClass:"wte-fb-popup"})})),t.on("click",".wte-package-create",(e=>{e.preventDefault();let t=document.getElementById("package_title")?.value,n={};!async function(){n=await a.addNewPackage({title:t}),window.wteEdit.editAPI.addPackageToStore(n)}()})),t.on("click",".wte-package-date-edit",(e=>{e.preventDefault();const t=e.target.dataset.dateIndex,a=e.target.dataset.packageId;t&&a&&jQuery.fancybox.open({src:jQuery(document.getElementById(`wte-package-date-editor_${a}_${t}`)),type:"inline",baseClass:"wte-fb-popup"})})),t.on("click",".wte-package-date-remove",(e=>{e.preventDefault();const t=e.target.dataset.dateIndex,a=e.target.dataset.packageId;if(!t||!a)return;let{editFormData:n}=wteEdit.editAPI._store.getState(),i={...n[a].packageDates};delete i[t];let o=e.target.dataset.target;document.querySelector(o)?.remove(),wteEdit.editAPI._store.dispatch({type:"UPDATE_STORE",data:{editFormData:{...n,[a]:{...n[a],packageDates:i}}}})})),document.addEventListener("change",(e=>{if(e.target.matches(".range-mode")){const t=e.target.dataset.packageId,a=e.target.checked,n=document.getElementById(`wte-flatpickr__date_${t}`);if(n&&n._flatpickr)n._flatpickr.set("mode",a?"range":"multiple");else{const e=JSON.parse(n.dataset.fpconfig);e.mode=a?"range":"multiple",flatpickr(n,e)}}})),t.on("click",".wte-package-date-add",(e=>{e.preventDefault();const t=window.wteEdit.editAPI._store,{editFormData:a,tripPackages:i}=t.getState(),s=e.target.dataset.packageId;if(!s)return;let l=document.getElementById(`wte-flatpickr__date_${s}`),c=l?.value,p={...a[s].packageDates};const d=document.getElementById(`wte-package-dates-list_${s}`);if(c&&c.length>0)if("range"===l._flatpickr.config.mode){let e=c.split(" to ");if(2===e.length){let t=new Date(e[0].trim()),a=new Date(e[1].trim());for(let e=t;e<=a;e.setDate(e.getDate()+1))r(p,e.toISOString().split("T")[0],s,i,d)}}else{let e=c.split(", ");for(let t of e)r(p,t,s,i,d)}l._flatpickr.clear();const u=d.cloneNode(!0);d.parentNode.replaceChild(u,d),o(u.parentNode,u),o(u),n(u),t.dispatch({type:"UPDATE_STORE",data:{editFormData:{...a,[s]:{...a[s],packageDates:p}}}})})),t.on("click",".wte-package-datetime-add",(e=>{var t;e.preventDefault();const a=e.target.dataset.target,n=e.target.dataset.packageId,i=e.target.dataset.dateIndex;let o=document.createElement("span");o.classList.add("tourtimewrap");let r=null!==(t=document.getElementById(a)?.querySelectorAll(".tourtimewrap").length)&&void 0!==t?t:0,s=`\n\t\t<span class="wte-tourtime wte-tt-from"><input name="dates[${n}][${i}][times][${r}][from]" type="text" class="wte-flatpickr"/></span> -\n\t\t<span class="wte-tourtime wte-tt-to"><input name="dates[${n}][${i}][times][${r}][to]" type="text" class="wte-flatpickr"/></span>\n\t\t<button class="wpte-btn wpte-btn-danger wte-tourtime-remove">X</button>\n\t\t`;o.innerHTML=s,o.querySelectorAll(".wte-flatpickr")?.forEach((e=>{flatpickr(e,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",static:!0})})),document.getElementById(a)?.append(o)})),t.on("click",".tourtimewrap>.wte-tourtime-remove",(function(e){e.preventDefault(),this.parentElement.remove()})),t.on("click",".wte-package-edit",(e=>{e.preventDefault();let t=document.querySelector(".wpte-field.wpte-floated .wte-range-picker");t&&(t.style.display="block");const a=e.target.dataset.packageId;a&&(jQuery.fancybox.open({src:jQuery(document.getElementById(`wte-package-editor_${a}`)),type:"inline",afterClose:function(){document.querySelector(".editor-post-publish-button")?.click()},baseClass:"wte-fb-popup"}),function(e,t=!1){const a=wp.editor.initialize||wp.oldEditor.initialize,n=wp.editor.remove||wp.oldEditor.remove;t&&n&&n(e),a&&a(e,{tinymce:{wpautop:!0},quicktags:!0})}(`wpte-package-description-editor_${a}`,!0))})),t.on("click","[data-toggle=tab]",(function(e){e.preventDefault();let t=this,a=t.hash,n=document.querySelector(a),i=t.closest(".wte-tabs");if(n&&!t.classList.contains("current")){if(i&&i.querySelector("[data-toggle=tab].current")){let e=i.querySelectorAll("[data-toggle=tab].current");e&&e?.forEach((e=>{if(!t.matches("[data-toggle=tab].current")){e.classList.toggle("current",!1);let t=e.hash;t&&document.querySelector(t).classList.remove("current")}}))}t.classList.add("current"),n.classList.toggle("current",!0)}})),t.on("change","[data-onchange]",(function(e){let t=this,a=document.querySelectorAll(t.dataset.onchangeToggleTarget);a&&a.forEach((e=>{if(t.dataset.onchangeToggleOffValue){let a=t.dataset.onchangeToggleOffValue.split("|");const n=["checkbox","radio"].includes(t.type.toLowerCase())?(t.checked?"yes":"no")==a[0]:a.includes(t.value);e.classList.toggle("hidden",n);let i=document.querySelector("[data-enquiry-form-link]"),o=document.querySelector('input[name="wp_travel_engine_settings[enquiry_form_link]"]:checked')?.value;if(i){const e=t.value&&"custom"===o;i.classList.toggle("hidden",!e)}}}))})),t.on("click",".wpte-add-weekly-time-slot",(function(e){e.preventDefault();const t=this.dataset.packageId,a=this.dataset.targetTd,i="data-td-"+a,o=document.querySelector(`#wte-weekly-time-slots_${t}`);let r=o.querySelector(`#wte-time-picker_${t}_${a}`)?.value||"";if(r&&o){let e=o.querySelector(`[${i}]`);const s=wp.template("wte-package-dates-weekly-hour")({hour:r,packageId:t,targetId:a}),l=document.createElement("div");l.innerHTML=s;let c=l.querySelector(".wte-week-days_selected-time-item");e.appendChild(c),e.insertAdjacentHTML("beforeend",l.innerHTML),n(e)}})),t.on("click",".wte-week-days_clear-btn",(function(e){e.preventDefault(),this.closest(".wte-week-days_selected-time-item")?.remove()}));var s=document.getElementsByClassName("wte-accordion");if(s.length>0)for(var l=0;l<s.length;l++)!function(t){new e(s[t])}(l);document.querySelectorAll(".wte-flatpickr")?.forEach((e=>n(null,e)))})()})(),jQuery((function(e){var t;function a(){e("#feat-img-gallery-metabox-list li").each((function(t){e(this).find("input:hidden").attr("name","wpte_gallery_id["+t+"]")}))}function n(){e("#feat-img-gallery-metabox-list").sortable({opacity:.6,stop:function(){a()}})}e(document).on("click","a.feat-img-gallery-add",(function(a){a.preventDefault(),t&&t.close(),(t=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader-title"),button:{text:e(this).data("uploader-button-text")},multiple:!0})).on("select",(function(){var a=e("#feat-img-gallery-metabox-list li").index(e("#feat-img-gallery-metabox-list li:last"));t.state().get("selection").map((function(t,n){t=t.toJSON(),index=a+(n+1),e("#feat-img-gallery-metabox-list").append('<li><input type="hidden" name="wpte_gallery_id['+index+']" value="'+t.id+'"><img class="image-preview" src="'+t.sizes.full.url+'"><a class="change-image button button-small" href="#" data-uploader-title="Change image" data-uploader-button-text="Change image">Change image</a><br><small><a class="remove-image" href="#">Remove image</a></small></li>')}))})),n(),t.open()})),e(document).on("click","a.change-image",(function(a){a.preventDefault();var n=e(this);t&&t.close(),(t=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader-title"),button:{text:e(this).data("uploader-button-text")},multiple:!1})).on("select",(function(){attachment=t.state().get("selection").first().toJSON(),n.parent().find("input:hidden").attr("value",attachment.id),n.parent().find("img.image-preview").attr("src",attachment.sizes.thumbnail.url)})),t.open()})),e(document).on("click","#feat-img-gallery-metabox-list a.remove-image",(function(t){t.preventDefault(),e(this).parents("li").animate({opacity:0},200,(function(){e(this).remove(),a()}))})),n()})),function(e,t){if(e&&e?.l10ns&&t){const a=t.split("_");e?.localize(e.l10ns[a[0]]||e.l10ns.en)}else document.createElement("src")}(window.flatpickr,window.wteL10n.locale),function(){const e=document.getElementById("the-list");e&&e.addEventListener("change",(e=>{const t=e.target;if(!t.matches("[data-difficulty-term-id]"))return;let a={action:"wte_set_difficulty_term_level",term_id:t.dataset.difficultyTermId,level:t.value,_nonce:wteL10n.wpxhr.nonce};fetch(wteL10n.wpxhr.root+`?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`).then((e=>e.json())).then((e=>{e.success&&window.location.reload()}))}))}(),document.addEventListener("click",(function(e){if(e.target.matches("#wptravelengine-settings_display_labels .add-row-button")){var t=(Math.random()+1).toString(36).substring(7),a=document.createElement("tr");a.innerHTML=`\n            <td>\n                <input type="text" name="wptravelengine_custom_strings[${t}][initial_label]" id="wptravelengine_custom_strings_${t}_initial_label" value="" />\n            </td>\n            <td>\n                <input type="text" name="wptravelengine_custom_strings[${t}][modified_label]" id="wptravelengine_custom_strings_${t}_modified_label" value="" />\n                <button class="delete-row-button"></button>\n            </td>\n        `,document.querySelector("#wte-label-table tbody").append(a)}})),document.addEventListener("click",(function(e){e.target.matches("#wptravelengine-settings_display_labels .delete-row-button")&&e.target.closest("tr").remove()}));